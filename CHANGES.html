<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>ns Change Log</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (X11; U; SunOS 4.1.3_U1 sun4m) [Netscape]">
</HEAD>
<BODY>

<P><!-- @(#) $Header: /home/smtatapudi/Thesis/nsnam/nsnam/ns-2/CHANGES.html,v 1.144 1997/09/08 18:19:29 heideman Exp $--><!-- Changed by: Sandeep Bajaj, 31-Mar-1997 --></P>

<H1>ns: Change History</H1>

<P><!--
 This ChangeLog is updated in the reverse order
  with the most recent changes coming first.
  --></P>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0b18.tar.gz">ns-2.0b18</A>
[PENDING RELEASE DATE]</H3>

<UL>

  <LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Mon Sep  8 11:16:53 PDT 1997</b><br>
       Updated test-output/{phase1,reno2,reno3,reno5,timers}
       wrt Kevin's timeout change from Monday, August 25.
     </LI>

<LI><A HREF="mailto:huang@isi.edu">[PH]</A> <B>Fri Sep  5 21:21:11 PDT 1997<BR></B>
<UL>
<LI> Ported Scalable Session Messages(SRM-SSM) codes from <A HREF="mailto:puneetsh@catarina.usc.edu">Puneet Sharam</A>
<LI> Also ported selective error models for SRM-SSM test scripts.
Files changed: errmodel.[cc,h]
<LI> Added helper functions to trace memory consumption in stack 
and heap area.  Users need to compile ns with -DMEMDEBUG_SIMULATIONS 
in Makefine DEFINE field. Example script:tcl/ex/newmcast/cmcast-50.tcl
Files added: mem-trace.h. Files changed: tclAppInit.cc scheduler.cc ns-lib.tcl
<LI> Fixed a minor dense mode multicast bug
<LI> Changed duplex-link-of-interfaces in tcl/ex/newmcast scripts to 
duplex-link
</UL>

  <LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Fri Sep  5 13:25:45 PDT 1997</B><br>
       Converted --with-Tcl to --with-TclCL
       (<em>incompatible change wtih 2.0b17</em>).
     </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~hari/">[hari]</A></B> <B>Thu Aug 28 11:43:13 PDT 1997</B><BR>
</LI>
Mainly 2 bug fixes:<br>
1. Accounting of ack_count in filteracks<br>
2. Big memory leak because packets weren't being freed correctly in filter.<br>
Files affected: semantic-packetqueue.{cc,h}
</UL>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~padmanab/">[VNP]</A></B> <B>Mon Aug 25 20:52:30 PDT 1997</B><BR>
</LI>

<UL>
<LI> Added tcp-fs.cc: TCP enhanced with "fast start" to enable a connection to quickly
     resume after an idle period. A more detailed description can be found in the
     source file itself.
<LI> Added semantic-red.cc: a version of RED that allows certain operations
     (at present, pickPacketToDrop()) to be dependent on higher-layer semantics.
<LI> tcp{,-fack}.cc: Added a new case ("3") to the switch in closecwnd() that
     resets cwnd_ to 1 but leaves ssthresh_ unchanged. This is invoked by the
     TCP timeout code if there is no outstanding data and if restart_bugfix_
     is set.
<LI> tcp.cc: If we are just coming out from an idle period, rtx timer is forced
     to be set again in output().
<LI> tcp(,-reno,-newreno}.cc: moved code that handles non-rtx timeout events into
     a new function timeout_nonrtx(). This enables derived classes to make additions
     or modifications to the handling of non-rtx timeouts without being forced to
     duplicate the rtx timeout code.
<LI> tcp-fack.cc: fack_ is updated in oldack() as well.
</UL>

  <LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall/">[Kevin Fall]</A> Mon Aug 25 13:27:11 PDT 1997</B><br>
	Change timeout initialization in tcp.cc:rtt_timeout().
	Old code:
		((srtt>>3)+rttvar)*tick
	new code
		((srtt>>3)+rttvar+1)*tick
	Fix contributed by Kathie Nichols w/Van.
     </LI>

  <LI><B><A HREF="http://www.cs.berkeley.edu/~hari/">[hari]</A> Sun Aug 24 18:10:50 PDT 1997</B><br>

	TCP with integrated congestion control and loss recovery.
	This helps to perform congestion control and loss recovery
between communicating hosts on a <i>per-host</i>, rather than <i>per-connection</i>, basis.
This is beneficial for Web-like workloads and in other situations
where multiple, logically different TCP transfers may be in progress
between two hosts simultaneously.  With IntTcpAgent, these logically
different connections would share the same cwnd, srtt, etc. for better
congestion control; in addition, data-driven loss recovery is improved
as well.  Support for "proxy" hosts, acting on behalf of many users,
is also included. <br>

Files:  tcp-int.{cc ,h} : Integrated TCP agent. <br>
        chost.{cc,h} : Per-host congestion control and loss recovery.
                       The relevant TCP control block variables are
                       maintained on w.r.t. each "Corresponding Host".<br>
        nilist.{cc,h} : Generic linked list routines.<br>
   </LI>

  <LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Tue Aug 19 15:27:11 PDT 1997</B><br>
       Initialization bugs in Vegas fixed.
       Code contributed by
       <a href="http://www-scf.usc.edu/~larse/">Lars Eggert</a>.
     </LI>

  <LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Tue Aug 19 13:26:32 PDT 1997</B><br>
       configure.in.Tcl -> configure.in.TclCL
     </LI>

  <LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> and <A HREF="mailto:breslau@parc.xerox.com">[LB]</A> Fri Aug 15 16:18:39 PDT 1997</B><br>
       New random number generator (rng.{cc,h}).
       Code to use the RNG is in Random.{cc,h} but currently ifdef'ed out.
     </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A> 
Thu Aug 14 11:19:36 PDT 1997</b><br>
Added 'flash_annotate t d m' helper function that flashes
a session level message m in the nam window starting at time t for duration d.

<LI><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A> <B>Wed Aug 13 17:20:00 PDT 1997<BR></B> Unified the way that timers are implemented in ns, by using
the abstract timer base class defined in timer-handler.h.  This simplifies
the Agent base class by removing the timer methods there.
Files affected:  agent.h, agent.cc, tcp.h, tcp.cc, tcp-sink.h, tcp-sink.cc,
tcp-sack1.cc, tcp-asym.cc, tcp-asym-sink.cc, tcp-fack.cc, tcp-vegas.cc,
tcp-full.h, tcp-full.cc, cbr.h, cbr.cc, udp.h, udp.cc, rtcp.cc, rtp.cc. </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Tue Aug 12 10:30:26 PDT 1997<br>
</B>class Samples now has a newpoint tcl command (code contributed by Ted Faber <faber@isi.edu>)
     </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Tue Aug 12 16:19:51 PDT 1997<br>
</B>Links now have a (documented!) trace-callback option to trace to a callback function.
     </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B>
<B>Mon Aug 11 14:00:27 PDT 1997</B><BR>
</LI>
<UL>
<LI>Fixed (yet another) problem with sack/tcp-sink where the # of sack blocks
initialized properly.  (reported by Venkat Padmanabhan).
<LI>Changed CBQ so that maxidle_ can be automatically determined, as in ns-1
<LI>Fixed buffer overflow bug in flow monitor, caused by using
tcl.resultf("%s", ptr) instead of tcl.result(ptr), where ptr
points to a big string.
</UL>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B>
<B>Sun Aug 10 15:11:27 PDT 1997</B><BR>
</LI>
<UL>
<LI>Fixed up PacketManager initialization code (in ns/lib/ns-packet.tcl)
so that modules that define packet header classes
can be safely ommitted from
the build.  Previously, an error would occur if the corresponding
class didn't exist.  This new structure catches
the case where the tcl code is out of date with respect to 
a packet header defined in C++.  As a result, two new bugs were
found and fixed: the ``aSRM'' and ``Tap'' packet header classes
previously did not have the appropriate initialization code in
ns-packet.tcl.
</UL>

<LI><A HREF="mailto:ahelmy@usc.edu">[AH]</A> <B>Sun Aug 10 02:05:12 PDT 1997<BR></B>
<UL>
<LI>Major changes and fixes to the pim-sm code in tcl/pim; pim-init.tcl 
added trace functions, pim-messagers.tcl tracing for protocol actions, 
pim-mrt.tcl updates, pim-recvr/sender.tcl support for asserts and 
prune-overrides (for LAN operation), pim-vifs.tcl added joining 
source-group pairs for source-specific trees (leave fix, also).
<LI>Added a first test-suite for pim-sm in 
tcl/ex/newmcast/pim-test-suite-1.tcl. This covers 6 basic scenarios for 
the pim protocol behavior to stress pim. [note: pim1.tcl does not work 
due to the way CBR source allocates packets, and interaction with pim 
encapsulation].
<LI>Added functions for clearing mcast forwarding caches in 
classifier-mcast.cc.
<LI>Major change to tcl/mcast/McastProto.tcl to support well-known-groups 
for local multicast on LANs. Also changes to ns-mcast.tcl for various 
fixes and source-group-joins.
</UL>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Sat
Aug 09 11:49:33 PDT 1997</B><BR>
</LI>
<UL>
<LI>First cut at port to win32 API (should work under both Windows 95 and NT).
<LI>
This version still limps ... the new Windows makefile
(makefile.vc) needs much more work.
<LI> This rev requires
the latest TclCL (new name for libTcl) since several changes
were required by the fact that Windows file names are case insensitive.
</UL>

<LI><A HREF="mailto:huang@isi.edu">[PH]</A> <B>Thu Aug  7 19:53:17 PDT 1997<BR></B>
<UL>
<LI> Added delay models for session level packet distribution.
Files added: delaymodel.[cc,h]
<LI> Modified structure of 'virtual links'.  Loss and delay modules
can be inserted flexibly.  Example script to insert loss module:
tcl/ex/newmcast/session3.tcl.
<LI> Added helper functions to monitor packets in transit. Example script:
tcl/ex/newmcast/pktintran.tcl
</UL>

<LI><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A> <B>Thu Aug 7 12:47:34 PDT 1997<BR></B> Redid tcp-full.cc timers to conform to the C++ timers defined in 
timer-handler.cc. </LI>

<LI><A HREF="mailto:huang@isi.edu">[PH]</A> <B>Mon Aug  4 17:59:32 PDT 1997<BR></B>
<UL>
<LI> Added session level packet distribution(1st pass). 
Files added: sessionhelper.cc, tcl/session/session.tcl, and example 
scripts tcl/ex/newmcast/session*.tcl.
<LI> Modified tcl/ex/mcast.tcl and tcl/ex/newmcast/*.tcl example scripts 
to be consistent with the current API.
</UL>

<LI><A HREF="http://ww-nrg.ee.lbl.gov/kfall">[KF]</A> <B>Thu Jul 31 12:09:34 PDT 1997<BR></B>
<UL>
<LI> add a max bound on the TCP rto (maxrto_), default is 64 sec (like bsd)
<LI> modifications to the compat library to allow constructs of the
form "set ns_foo(bar) 3" to change global defaults.
<LI> add a (hacky) way to support the ns-1 style of creating cbq
classes (i.e. "[new class]") which OTcl really doesn't like much.
<LI> increase wrk_ array in the flow monitor and check bounds on it
</UL>

<LI><A HREF="http://ww-nrg.ee.lbl.gov/kfall">[KF]</A> <B>Tue Jul 29 15:56:34 PDT 1997<BR></B> Fixed bug in TCP Sack sink which made the initialization of
max_sack_blocks unpredictable (changed tcp-sink.{cc,h}).  Also, removed
redundant default for this variable in ns-default.tcl. </LI>
<P>

<LI><A HREF="mailto:breslau@parc.xerox.com">[LB]</A> <B>Tue Jul 29 14:31:34
PDT 1997<BR></B> ported ability to limit the amount of data sent by a CBR source
(maxpkts_) from ns-1 to ns-2. Files changed: cbr.cc, cbr.h.</LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0b17.tar.gz">ns-2.0b17</A>
Fri, 25 Jul 1997 22:50:34 -0700</H3>

<P>This release is CVS-tagged with ``NS_2_0B17''. </P>

<UL>
<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> and <A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A>
Fri Jul 25 17:29:12 PDT 1997<BR>
</B>ns-compat now catches access to old default variables (like ns_tcp(window)).
This approach is a stop-gap, eventually we could map the old reads/writes
to the new variables if we think we must. </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Fri Jul 25 17:00:00
PDT 1997<BR>
</B>Configure now checks for libTcl-1.0b2. </LI>

<LI><B><A HREF="http://www.isi.edu/~kkumar/">[SK]</A> Fri Jul 25 12:49:36
PDT 1997<BR>
</B>Made modifications to remove MultiSim and MultiNode. Files affected:
ns-lib.tcl, ns-node.tcl, ns-mcast.tcl, CtrMcast.tcl </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov:80/floyd/">[SF]</A></B> <B>Fri
Jul 25 11:18:16 PDT 1997</B><BR>
</LI>

<UL>
<LI>Changed tcp-sack1.cc to correctly use the receiver's advertised window
during Fast Recovery. </LI>
</UL>

<LI><B><A HREF="http://www.cs.berkeley.edu/~padmanab/">[VNP]</A></B> <B>Fri
Jul 25 02:32:43 PDT 1997</B><BR>
</LI>

<UL>
<LI>Added semantic-packetqueue.{cc,h}: a derived class of PacketQueue that
understands higher-layer (e.g., TCP) semantics. To enable the creation
and configuration of a PacketQueue/Semantic object in Tcl, PacketQueue
is now derived from TclObject. </LI>

<LI>tcp*.{cc,h}: Got rid of the return-by-reference functions for the traced
member variables of TcpAgent. </LI>
</UL>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Thu Jul
24 16:02:27 PDT 1997<BR>
</B>Ported telnet source from ns-1 to ns-2. new files: telnet.{cc,h}. Changed
files: tcp.{cc,h}, ns-agent.tcl, ns-source.tcl, ns-default.tcl <BR>
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~padmanab/">[VNP]</A></B> <B>Thu
Jul 24 02:08:31 PDT 1997</B><BR>
</LI>

<UL>
<LI>tcp.{cc,h}: Got rid of the old-style tracing and replaced it with Giao's
TracedVar stuff. It is <I>no longer necessary</I> to use the return-by-reference
functions to refer to the traced variables (e.g., cwnd() instead of cwnd_),
but this will still work for now. </LI>
</UL>

<LI><B><A HREF="http://www.cs.berkeley.edu/~padmanab/">[VNP]</A></B> <B>Tue
Jul 22 02:13:12 PDT 1997</B><BR>
</LI>

<UL>
<LI>tcp.cc: finish() is called whenever there is no unacknowledged data
</LI>

<LI>tcp{,-reno,-newreno,-fack}.cc: </LI>

<UL>
<LI>rtx timer is NOT backed off at the time of fast retransmission </LI>

<LI>during fast recovery mode, we compare new ack with recover_ only if
recover_cause_==1 </LI>
</UL>

<LI>tcp-fack.h: separate file for definition of FackTcpAgent to enable
derived classes </LI>

<LI>tcp-nonfifo.cc: added support for priority drop </LI>

<LI>red.cc: moved code that picks drop victim into pickPacketToDrop().
This allows derived classes to use a different algorithm for this. </LI>

<LI>queue-monitor.{cc,h}: option to exactly trace queue length (rather
than just sample it) </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Thu Jul 17
08:16:16 PDT 1997<BR>
</B>- srm.cc/srmAgent::recv() did not free packets appropriately, causing
wastage of memory for large simulations. (Noted by <A HREF="mailto:puneetsh@catarina.usc.edu">Puneet</A>)<BR>
- streamlined bin/raw2gp to attempt to unify the raw2* programs. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Jul 15
14:44:19 PDT 1997<BR>
</B>Minor bug fixes in rtglib, and raw2xg. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A></B> <B>Mon Jul
14 15:05:09 PDT 1997<BR>
</B>Ported fulltcp.cc, fulltcp.h, and test-suite-fulltcp.tcl. New files:
tcp-full.cc, tcp-full.h, and tcl/test/test-suite-full.tcl. Changed files:
trace.h, trace.cc, tcp.h, ns-compat.tcl, ns-default.tcl, ns-source.tcl.
<BR>
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Fri Jul 11
09:53:33 PDT 1997</B></LI>

<P><BR>
Major Updates: SRM </P>

<UL>
<LI>Adaptive Timers as described in <A HREF="http://ftp.ee.lbl.gov/pub/papers/srm.ps.Z">[Floyd
etal. sigcomm '95]</A> <BR>
Files Affected: tcl/mcast/srm-adaptive.tcl (<B>new</B>), srm.cc, srm.h,
tcl/ex/srm-adapt-req.tcl (<B>new</B>), tcl/ex/srm-adapt-rep.tcl (<B>new</B>)
</LI>

<LI>Cleanup of the tracing in srm.tcl </LI>

<LI>Added tcl/mcast/srm-nam.tcl, so that, if sourced, will separate SRM
packets based on the type of packet. Data messages will have flowId_ 0,
session, request and repair messages have flow ids 40, 41, and 42 respectively.
The start number is specified by the global variable, <TT>ctrlFid_</TT>.
</LI>

<LI>Cleanup of the example scripts in tcl/ex. See tcl/mcast/srm.txt for
details. </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Fri Jul 11
09:53:33 PDT 1997<BR>
</B>Minor mods </LI>

<UL>
<LI>Hooks for DelayLink object to have a drop-target. Currently no OTcl
support yet. Should be there when I get around to it... someday... maybe...
<BR>
Files Affected: delay.cc, delay.h </LI>

<LI>Cleanup compile time errors in scheduler.cc, scheduler.h. </LI>

<LI>The default static routing now takes a cost parameter; it is now possible
to do asymetric paths by configuring link costs appropriately. <BR>
Files Affected: route.cc, tcl/lib/ns-lib.tcl </LI>

<LI>Bug fixes to proc gen-map() in tcl/lib/ns-trace.tcl. </LI>

<LI>Fix multicast-rtglib interaction API. <BR>
Files Affected: tcl/mcast/McastProto.tcl, tcl/mcast/ns-mcast.tcl, tcl/mcast/dynamicDM.tcl,
tcl/rtglib/route-proto.tcl. </LI>

<LI>Bug fix to proc all-connectors() in rtglib. Routine did not instance
the appropriate variable. Hence, links did not drop packets in flight when
a link fails (hey, this may be a feature... :-) <BR>
Files Affected: tcl/rtglib/dynamics.tcl. </LI>

<LI><FONT SIZE=-2>Created a *hacky* loss module to fake periodic loss of
packets. (maybe I can sneak it in if I use real small print, and hope no
one notices...).</FONT> </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Wed Jul 9 15:16:42
PDT 1997<BR>
</B>RBP updates, including Agent/TCP/Reno/RBP. </LI>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Thu Jul
3 12:37:09 PDT 1997<BR>
</B>Created RandomVariable class, a pure virtual class for random variables,
and derived classes for Uniform, Constant, Pareto, Exponential and HyperExponential
distributions. New files: ranvar.{h,cc}, tcl/ex/ranvar.{tcl,txt}. Changed
files: ns-random.tcl, ns-default.tcl. <BR>
</LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A> Wed Jul 2 20:37:33
PDT 1997<BR>
</B>Add the &quot;flowmon&quot; module and update supporting scripts in
tcl/rtmechanisms. This module is able to keep per-flow state. A flow is
defined by creating a classifier (typically of the classifier-hash variety)
and giving it to the flowmon. Examples are to be found in the rtmechanisms
directory. Files affected:</LI>

<UL>
<P> </P>

<LI>flowmon.cc -&gt; new functionality </LI>

<LI>tcl/lib/ns-default.tcl -&gt; defaults for Flow and Flowmon </LI>

<LI>tcl/lib/ns-queue.tcl -&gt; rework the way CBQ handles drops </LI>

<LI>tcl/lib/ns-lib.tcl -&gt; add hack to allow specification of a classifier
object with a CBQ or CBQ/WRR queue type when creating a &quot;simplex-link&quot;
</LI>

<LI>Makefile.in -&gt; include flowmon.o </LI>

<LI>FILES -&gt; add flowmon.cc + rtm stuff </LI>
</UL>

<LI><B><A HREF="http://www-scf.usc.edu/~bhuang/">[PH]</A> Fri Jun 27 20:13:23
PDT 1997</B><BR>
</LI>

<UL>
<LI>Added a general mcast control message agent(a 1st pass) to make tracing
easier: prune.[h, cc] </LI>

<LI>Fixed minor bugs in dynamicDM and pimDM </LI>
</UL>

<LI><B><A HREF="http://www-scf.usc.edu/~bhuang/">[PH]</A> Wed Jun 25 18:19:07
PDT 1997</B><BR>
</LI>

<UL>
<LI>Added dynamic DVMRP and PIM-DM multicast: tcl/mcast/[dynamic, pim]DM.tcl
</LI>

<LI>Cleaned up mulicast API(1st pass): tcl/ex/newmcast/mcast[1,2].tcl </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~kkumar/">[SK]</A> Mon Jun 23 13:19:15
PDT 1997<BR>
</B>Added man page for ns-2. </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Thu Jun 19 20:03:35
PDT 1997<BR>
</B>tcp-rbp and friends added. Rate-based pacing is an experimental addition
to TCP to address the slow-start restart problem. See <http://www.isi.edu/lsam/publications/rate_based_pacing/index.html>for
details. </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Thu Jun 19 20:00:51
PDT 1997<BR>
</B>raw2xg updated with more features (better usage and -qs:m: options).
</LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Thu Jun 19 20:00:28
PDT 1997<BR>
</B>agent-timer.{h,cc} implements timers for agents with classes (rather
than pending_[] and timer_[]). </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~gnguyen">[GN]</A> Thursday,
Jun 19 16:03:23 PDT 1997<BR>
</B>Minor enhancement to scheduler to make debugging easier by using the
uid_ field of each event: positive uid_: inside the scheduling queue negative
uid_: NOT in the scheduling queue </LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Mon Jun 16 17:18:46
PDT 1997<BR>
</B>Added TCP Vegas (ported from Ted Kuo's implementation for ns-v1). Changed
TcpAgent::send to TcpAgent::send_much. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> <B>Mon Jun
16 11:15:45 PDT 1997<BR>
</B>Added simple simulation-level annotation (ns-trace.tcl, trace.cc).
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~gnguyen">[GN]</A> Friday, Jun
13 19:03:23 PDT 1997<BR>
</B><A HREF="http://daedalus.cs.berkeley.edu">Daedalus Research Group</A>
extensions by: <A HREF="http://www.cs.berkeley.edu/~gnguyen">Giao Nguyen</A>,
<A HREF="http://www.cs.berkeley.edu/~hari">Hari Balakrishnan</A>, <A HREF="http://www.cs.berkeley.edu/~padmanab">Venkata
Padmanabhan</A>. </LI>

<UL>
<LI>LAN and wireless networks: </LI>

<UL>
<LI>Link-layer protocols:<BR>
simple stop-and-wait protocol<BR>
TCP-aware snoop protocol<BR>
</LI>

<LI>Scheduling algorithms at LAN interface queues </LI>

<LI>MAC protocols:<BR>
CSMA/CD (10 Mbps Ethernet)<BR>
CSMA/CA (WaveLAN)<BR>
IEEE 802.11<BR>
Metricom's Ricochet MAC<BR>
</LI>

<LI>Shared channel with wireless error models </LI>
</UL>

<LI>TCP router enhancements for asymmetric networks </LI>

<LI>Tracing of TCP variables </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Fri Jun 13 18:06:33
PDT 1997<BR>
</B>Added slow_start_restart option to TcpAgent. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> <B>Fri Jun
13 17:18:13 PDT 1997<BR>
</B>Added SCUBA protocol module in tcl/rtp. Added some demos in ex/scuba.
</LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> <B>Thu Jun
12 12:32:31 PDT 1997</B><BR>
</LI>

<P>Small change to conf/config.head.in to look for socket() rather than
poll() when searching for the -lsocket library. Also a new version of the
configure script based on this. </P>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Wed
Jun 11 11:49:28 PDT 1997</B><BR>
</LI>

<P>Bug fixes to emulation rig. Previous version didn't properly account
for the fact that external events (i.e., packet arrivals) could come before
the next future event. Now, the scheduler sets a tcl timer to advance time
(instead of waiting in a null select) and the tap-agent sync's simulation
time to real time when an external packet arrives. </P>

<LI><B><A HREF="mailto:huang@isi.edu">[PH]</A></B> <B>Wed Jun 11 09:34:33
PDT 1997<BR>
</B>Changed centralized mcast test files to use MultiNode expandaddr option,
provided by <A HREF="mailto:breslau@parc.xerox.com">Lee Breslau</A>. It
solves the limitation that MultiSim only allow 128 unicast nodes. Also,
made minor changes to reduce memory used in simulations File changed: tcl/ex/newmcast/cmcast-[50,100,150,200,250].tcl.
<BR>
</LI>

<LI><B><A HREF="mailto:huang@isi.edu">[PH]</A></B> <B>Mon Jun 9 15:59:01
PDT 1997<BR>
</B>Bug fix: Changed CtrMcastComp:compute-branch() to work in source =
RP case for RPT. File changed: tcl/ctr-mcast/CtrMcastComp.tcl. <BR>
</LI>

<LI><B><A HREF="mailto:tomh@cs.berkeley.edu">[TH]</A></B> <B>Mon Jun 9
15:00:34 PDT 1997<BR>
</B>Bug fix: Changed Newreno::recv() static variables acked, new_ssthresh,
ack2, ack3, and basertt to be class member variables. File changed: tcp-newreno.cc.
<BR>
</LI>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Sun Jun
8 14:09:16 PDT 1997<BR>
</B>Provided a fix so that more than 127 nodes can exist in a simulation
that uses both unicast and multicast transport. Also added a proc to allocate
unique multicast addresses. File changed: tcl/mcast/ns-mcast.tcl<BR>
</LI>

<LI><B><A HREF="mailto:tomh@cs.berkeley.edu">[TH]</A></B> <B>Fri Jun 6
17:30:16 PDT 1997<BR>
</B>Ported tcp-fack.cc from ns-1 to ns-2. File added: tcp-fack.cc. <BR>
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Thu Jun 5
09:24:50 PDT 1997<BR>
</B>ktest-all will stored compress files in test-output-raw, to save space.<BR>
minor mods to srm test suite, documentation in srm.txt.<BR>
minor bug fixes in srm. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Jun 3
14:08:45 PDT 1997<BR>
Major mods</B> SRM for <I>ns<BR>
</I>Currently, some of the fixed timer functions have been implemented.
The adaptive functions, as well as local recovery mechanisms will be coming
along soon. <BR>
An earlier almost entirely C++-based version (ported from the ns-1 implementation)
is also checked in, tagged, and overwritten. It can be accessed by vint
members should they want to take a look at it later. <BR>
Files affected: new files: srm.cc, srm.h, srm-state.h, tcl/mcast/srm.tcl,
tcl/mcast/srm-debug.tcl, tcl/mcast/srm-debug++.tcl, tcl/ex/simple-srm.tcl,
tcl/ex/srm2.tcl, tcl/ex/srm_star.tcl, tcl/ex/simple-srm-nam.tcl, tcl/ex/srm2-nam.tcl,
tcl/ex/srm_star-nam.tcl. Also modified: Makefile.in, trace.h, tcl/lib/ns-packet.tcl.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Jun 3
14:08:45 PDT 1997<BR>
</B>Bug fixes in rtglib: </LI>

<UL>
<LI>dynamics.tcl: rtModel/Manual did not work. Fixed, and tested. This
code is now used in tcl/ex/srm2.tcl and tcl/ex/srm_star.tcl to create ``interesting''
single packet drops. </LI>

<LI>route-proto, RouteLogic::lookup would return OIDs when dynamic routing
is enabled, which breaks the multicast. (It now breaks when equal cost
multipath routing is used, which needs to be fixed, to make multicast happy).
</LI>

<LI>The new interfaces code defines additional instance variables to point
to nodes. Link dynamics wants to reset most everything (except nodes).
Resetting nodes can do bad thigns to agents. </LI>
</UL>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Jun 3
14:08:45 PDT 1997<BR>
</B>minor fixes: </LI>

<OL>
<LI>In C++, Stoustrup [sic] recommands that array storage should be freed
as &quot;<TT>delete[] variable</TT>&quot;, instead of simply &quot;<TT>delete
variable</TT>&quot;. Changes made to AtHandler::handle(), Scheduler::command(),
and RouteLogic::compute_routes(). </LI>

<LI>Fixed annoying compiler warnings when used with -Wall in gcc. </LI>

<UL>
<LI>&quot;member initializers for &lt;member1&gt; and &lt;member2&gt; will
be re-ordered to march declaration order.&quot; warnings fixed in packet.h,
classifier-hash.cc, trace.cc, and queue-monitor.h. </LI>

<LI>&quot;control reaches end of non-void function&quot; fixed in Replicator::classify(Packet*)
and QueueMonitor::command(int, const char*const*) </LI>

<LI>&quot;suggest parentheses around assignment used as truth value&quot;
fixed in delay.h </LI>
</UL>

<LI>configure.in.head should not set -O2 if the .devel file is present.
Furthermore, as Johnh noted, -O2 is only relevant for gcc, so we really
should fix this better. </LI>

<LI>RouteLogic now only works in the context of a Simulator. Fix route-test
to instantiate a dummy Simulator. </LI>

<LI>Test Suites Modified misc.tcl and topologies.tcl to add hooks for a
multicast test suite.<BR>
ns-trace.tcl:gen-map did not show enough information within a node, for
example inside a MultiNode. </LI>

<LI>Changed simplex-link, duplex-link to directly generate interfaces when
told. Use by </LI>

<PRE>        Simulator set NumberInterfaces_ 1</PRE>
</OL>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Thu May 30 1997<BR>
</B>Added support for dmalloc for memory debugging. Configure using <TT>--with-dmalloc</TT>.
</LI>

<LI><B><A HREF="http://www.isi.edu/~johnh/">[johnh]</A> Thu May 27 1997<BR>
</B>Revised configure scripts to eliminiate code duplication. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A> Tues May 27
19:00:00 PDT 1997</B><BR>
</LI>

<UL>
<LI>Renamed test-suite-v2.tcl and test-all-v2 to test-suite.tcl and test-all,
respectively. These files were also aligned with Kannan's tests in the
tcl/test directory.</LI>

<LI>Moved existing test-suite.tcl to tcl/test, renaming it as test-suite-v1.tcl.
Moved existing test-all to tcl/test/test-all-v1.</LI>

<LI>Moved test-suite-cbq.tcl, test-suite-red.tcl, and test-suite-sack.tcl
to tcl/test and appended them with &quot;-v1&quot; suffix. Made similar
moves for test-all-cbq, test-all-red, test-sack, and test-all-sack.</LI>
</UL>

<LI><B><A HREF="mailto:tomh@cs.berkeley.edu">[TH]</A></B> <B>Tues May 27
16:45:00 PDT 1997<BR>
</B>Fixed bug in tcp-newreno.cc which was causing TcpAgent::recv to be
called instead of NewRenoTcpAgent::recv. This bug has been present since
the initial revision of ns-2.<BR>
</LI>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Fri May
23 15:46:16 PDT 1997<BR>
</B>Fixed a bug in CalendarScheduler::cancel() that corrupted the calendar
data structure and caused the simulator to crash. Also improved the efficiency
of that function. File changed: scheduler.cc <BR>
</LI>

<LI><B><A HREF="http://www-scf.usc.edu/~bhuang">[PH]</A></B> <B>Thu May
22 18:03:36 PDT 1997</B><BR>
</LI>

<UL>
<LI>Added larger scale test files. tcl/ex/newmcast/cmcast-[100,150,200,250].tcl,
tcl/ex/newmcast/cmcast-big.txt </LI>
</UL>

<LI><B><A HREF="http://www-scf.usc.edu/~bhuang">[PH]</A></B> <B>Thu May
22 13:33:56 PDT 1997</B><BR>
</LI>

<UL>
<LI>Moved agents that handles IP mcast packet encapsulation and decapsulation
to C++. </LI>

<LI>Added a centralized mcast example that uses only source specific trees.
tcl/ex/newmcast/cmcast-spt.tcl </LI>

<LI>Added prune propagation for dense mode mcast. Patch provided by <A HREF="mailto:I.Kouvelas@cs.ucl.ac.uk">Isidor
Kouvelas</A> and <A HREF="mailto:L.Vicisano@cs.ucl.ac.uk">Lorenzo Vicisano</A>
(actually this change was committed two days ago) </LI>

<LI>Files added: ctrMcast.cc, ctrMcast.h, tcl/ex/newmcast/cmcast-spt.tcl
</LI>

<LI>Files changed:tcl/ctr-mcast/CtrMcast.tcl, tcl/ctr-mcast/CtrMcastComp.tcl,
tcl/lib/ns-packet.tcl, trace.h tcl/mcast/ns-mcast.tcl, tcl/mcast/DM.tcl,
Makefile.in, FILES, CHANGES.html tcl/ex/newmcast/*.tcl </LI>
</UL>

<LI><B><A HREF="mailto:tomh@cs.berkeley.edu">[TH]</A></B> <B>Wed May 21
18:57:00 PDT 1997<BR>
</B>Ported bug fixes from ns-1 for tcp.cc, tcp-newreno.cc, tcp-reno.cc.
This also affected ns-default.tcl <BR>
Added reset functions to Acker and TcpSink in tcp-sink.cc so that tcp sinks
can be reset and reused in a simulation (Sack sinks also are covered) <BR>
</LI>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Wed May
21 17:02:52 PDT 1997<BR>
</B>Added variable length portion to Packet class to handle non-fixed length
stuff (e.g., data). Changed files: packet.h, agent.h, agent.cc <BR>
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue May 13
23:37:08 PDT 1997<BR>
</B>Added equal cost multi-path routing. Usage is shown in two examples
in tcl/ex/simple-eqp.tcl and simple-eqp1.tcl.<BR>
As a side effect, added the instproc-like, <TT>installNext</TT> to classifier.cc,
to install a TclObject in the next available slot. All, added instprocs
install, clear, and installNext to track slots filled. These are then used
by the instproc adjacents, to return information about adjacent TclObjects
in the slot.<BR>
Files affected: classifier-mpath.cc (<B>new</B>), tcl/ex/simple-eqp.tcl
(<B>new</B>), tcl/ex/simple-eqp1.tcl (<B>new</B>), tcp/ex/simple-eqp-nam.tcl
(<B>new</B>), tcl/ex/simple-eqp1-nam.tcl (<B>new</B>), tcl/rtglib/route-proto.tcl.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue May 13
23:37:08 PDT 1997<BR>
</B>Trace manipulation tools: </LI>

<UL>
<LI>raw2xg and raw2gp take the -a option, to trace acks as well, if trace
information about them is present. </LI>

<LI>getrc will extract trace information about a single node or link. Usage
is </LI>

<PRE>        getrc [-o output file] [-b] -s node1 [-d node2] [trace file...]</PRE>

<P>Typically, all traffic from node1 is extracted. If -b is specified,
then all information to node1 is extracted as well. If both node1 and node2
are specified, then all traffic on the link between node1 and node2 is
extracted. Specifying the -b option will extract traffic in both directions
on that link. </P>
</UL>

<P>See also tcl/test/README for a relatively more comprehensive writeup.
</P>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue May 13
23:37:08 PDT 1997<BR>
</B>Cleaned up heap.h and dynalink.cc to elide compiler warnings seen with
-Wall. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue May 13
23:37:08 PDT 1997<BR>
</B>The route dynamics code si cleaned up. Route Models are only setup
just prior to initiating routing. This eliminiates some unwanted side effects
when initiating tracing on links that are dynamic.<BR>
Files affected: tcl/lib/ns-lib.tcl, tcl/lib/ns-link.tcl, tcl/rtglib/dynamics.tcl.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Fri May 16
00:48:14 PDT 1997<BR>
</B>New route model for one shot route dynamics. It should now be possible
to say </LI>

<PRE>        $ns_ rtmodel-at $time $op $node1 [$node2]</PRE>

<P>to take $node1 (or the link $node1-$node2) up (or down, as specified
by $op) at a particular time. It is done by creating a one-shot route model,
rtModel/Manual. (It is currently untested, though no problems are anticipated
by this author...hah!) </P>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Tue
May 13 17:44:34 PDT 1997</B><BR>
</LI>

<UL>
<LI>Made changes to the scheduler (added <I>RealTimeScheduler</I>) to support
real-time simulation for emulated network envinroments. This real-time
extension works just like the normal scheduler but events are delayed until
real-time catches up. In particular, the scheduler &quot;now&quot; method
returns the current simulated time rather than the current real time so
any simulation CPU overhead is not reflected in event timing calculations.
</LI>

<LI>Added objects to interface to external networks. net.h, net.cc, and
net-ip.cc modules came from mash/mbone tools. </LI>

<LI>Added hook in ns-lib.tcl to create tap header only if real-time scheduler
is specified. This avoids unnecessary waste of memory when not using tap
agents. We assume that taps and real-time schedulers are used in tandem
but haven't added any code to verify this. </LI>
</UL>

<LI><B><A HREF="http://www-scf.usc.edu/~bhuang">[PH]</A></B> <B>Tue May
13 15:30:00 PDT 1997</B><BR>
</LI>

<UL>
<LI>Seperated multicast protocol functionalities from MultiNode. Moved
original multicast code tcl/lib/ns-mcast.tcl to tcl/mcast/*.tcl. </LI>

<LI>Added multi-access link module (tcl/lan/) and interface support (tcl/interface/
and net-interface.cc). </LI>

<LI>Added detailed PIM code (tcl/pim in progress). The above are codes
ported from <A HREF="http://www-scf.usc.edu/~ahelmy/">Ahmed A-G Helmy</A>'s
development on top of ns-2.0a3.<BR>
</LI>

<LI>Added centralized multicast tree computation modules (tcl/ctr-mcast).
</LI>
</UL>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Fri May
2 15:09:32 PDT 1997<BR>
</B>Updated the tcl script demonstrating the use of traffic generation
modules. It now includes a simple nam demo. Changed files: tg.tcl, tg.txt.
New files: tg-nam.tcl</LI>

<P><BR>
</P>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Fri
May 2 12:09:53 PDT 1997<BR>
</B>Updated FILES. Also, set up a nighly cron job to snapshot the current
cvs snapshot into a publicly accessible &quot;ns-current&quot; release.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Mon Apr 28
09:08:26 PDT 1997<BR>
</B>Moved <TT>up?</TT> and <TT>down?</TT> to base <TT>Class Link</TT>,
instead of being in the derived <TT>Class SimpleLink</TT>. The procedures
work for simple p2p links. Other types of media such as LANs that must
provide similar features may have to redefine them appropriately. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Mon Apr 28
09:08:26 PDT 1997<BR>
</B>Leveraged of the v2 test suites to construct routing test suites. The
list of mods are: </LI>

<OL>
<LI>A new test-suite driver, called ktest-all is in the bin directory.
The invocation </LI>

<PRE>        ktest-all [&lt;suite&gt; [&lt;test&gt; [&lt;topology&gt;]]]</PRE>

<P>executes: </P>

<PRE>        ns tcl/test/test-suite-&lt;suite&gt;.tcl &lt;test&gt; &lt;topology&gt;</PRE>

<P>If no test is specified, it runs all the tests in that suite. If no
topology is specified, it runs the specified test against all topologies
defined in the topologies file. </P>

<LI>Any single test-suite file is now in three parts: (1) tcl/test/topologies.tcl
contains a library of topologies, and variants for netowrk dynamics. Currently
four topologies are defined. (2) tcl/test/misc.tcl contains the basic housekeeping
routines, such as openTrace, finish etc. (3) Individual tests are in tcl/test/test-suite-&lt;suite&gt;.tcl
files. </LI>

<LI>The procedure <TT>finish</TT> in tcl/test/misc.tcl no longer directly
invokes xgraph. Instead, it simply writes out out.tr, closes all trace
files, and exists. </LI>

<LI>ktest-all will invoke xgraph if the DISPLAY environment is defined;
otherwise, it will save the out.tr file as is in test-output-raw for later
comparison; in the latter case, it will also use gnuplot to generate a
postscript file that is placed in the ps-files directory. </LI>

<LI>The bin directory also contains raw2xg and raw2gp, two programs to
convert trace files into output for xgraph or gnuplot. Convenient ways
of invoking either are: </LI>

<PRE>        % raw2xg out.tr | xgraph -bb -tk -nl -m -x time -y packets
        % raw2gp out.tr &gt; out.gp ; gnuplot
        load &quot;out.gp&quot;
        ...other gnuplot commands ...
        exit
        % </PRE>
</OL>

<P>There will be additional cleanup as I work on the test-suites some more.
Comments and suggestions are welcome. </P>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Mon Apr 28
09:08:26 PDT 1997<BR>
</B>Makefile (and Makefile.in) for <I>ns.dyn</I> does not include tclAppInit.o.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Wed Apr 23
16:50:15 PDT 1997<BR>
</B>SACK crashes when it is not in fast recovery mode, and receives acks
out of order. For now, we just ignore such acks. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Wed Apr 23
16:50:15 PDT 1997<BR>
</B>tcl/ex/simple-*.tcl examples should close output files before further
processing in order to ensure that all data gets properly flushed.<BR>
In addition, added tracing route dynamics events to stdout.<BR>
Files affected: tcl/ex/simple-dyn.tcl, tcl/ex/simple-rtg.tcl, tcl/ex/simple-heap.tcl,
<BR>
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Wed Apr 23
16:50:15 PDT 1997<BR>
</B>Bugs in rtglib. delay.cc, delay.h did not calculate packet transmission
time correctly.<BR>
Routing code had bugs in how routes were calculated, and route updates
distributed.<BR>
Files affected: delay.cc, delay.h, tcl/rtglib/route-proto.tcl, tcl/rtglib/dynamics.tcl<BR>
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Mon Apr 14
12:06:35 PDT 1997<BR>
</B><TT>abort()</TT>, when called, breaks of the trace abruptly. Trap the
call with cpp hacks, invoke [[Simulator instance] flush-trace] and then
abort.<BR>
Files affected: Makefile.in, tclAppInit.cc, tkAppInit.cc </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Thu Apr 10
16:21:25 PDT 1997<BR>
</B>Added functions to dump the simulation objects that comprise the topology,
as an aid to debugging. Use by specifying </LI>

<PRE>        [Simulator instance] gen-map</PRE>

<P>to see the dump on stderr.<BR>
Files affected: tcl/lib/ns-trace.tcl </P>

<LI><B><A HREF="mailto:breslau@parc.xerox.com">[LB]</A></B> <B>Fri Apr
25 14:26:12 PDT 1997</B><BR>
</LI>

<UL>
<LI>Added traffic generation modules to implement on/off sources with exponentially
and pareto distributed on and off times, and a traffic generation module
that is driven by a trace file. New files: trafgen.h, pareto.cc, expoo.cc,
traffictrace.cc, traffictrace.h, udp.cc, udp.h.</LI>

<P><BR>
</P>

<LI>To support the pareto on/off source, added the function Random::pareto()
to random.h.</LI>
</UL>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> <B>Wed Apr
23 22:00:21 PDT 1997</B><BR>
</LI>

<UL>
<LI>CBQ is now part of the simulator</LI>

<P><BR>
Generally works. </P>

<LI>ALL default queue sizes are now 50 [per ns-1 defaults]</LI>

<LI>QueueMonitors now know the difference between</LI>

<P><BR>
drops, arrivals, and departures and can monitor these </P>

<LI>new class called 'Samples' which collects samples</LI>

<P><BR>
points of something and can provide a mean and variance of the points (see
integrator.cc) </P>

<LI>Queues can be flow controlled</LI>

<P><BR>
by forcing them to be blocked or unblocked as needed. Also it's possible
to make it so that when they send a packet they become blocked rather than
unblocked. </P>

<LI>common packet header</LI>

<P><BR>
contains a timestamp field; this is used to compute queueing delay for
individual packets at queues </P>

<LI>classifier-hash</LI>

<P><BR>
a classifier to identify 'flows' ... still in development, but presently
used by cbq </P>

<LI>bug fixes/mintor changes to red.cc, test-suite-red.tcl</LI>

<LI>test-suite.tcl updated to ns-1 version (stats test minor change)</LI>
</UL>

<LI><B><A HREF="http://www.parc.xerox.com/csl/members/bajaj">[SB]</A></B>
<B>Thu Apr 17 17:57:53 PDT 1997<BR>
</B>Fixed tcp-simple.cc and random.cc so that test-suites work for solaris
as well. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A></B> <B>Wed Apr
9 16:24:25 PDT 1997<BR>
</B>Fixed busy-wait condition in tcp-sack1.cc that resulted from incorrectly
setting the overhead parameter. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Apr 8
16:33:49 PDT 1997<BR>
</B>Added Distance Vector dynamic routing to <I>ns</I>; As a side effect,
created the C++ random functions in tcl/lib/ns-random.tcl.<BR>
At some point, a test-suite-routed.tcl will be provided to show examples
of routing.<BR>
Files affected: rtProtoDV.cc (<B>new</B>), rtProtoDV.h (<B>new</B>), trace.h,
tcl/lib/ns-lib.tcl, tcl/lib/ns-random.tcl (<B>new</B>), tcl/rtglib/route-proto.tcl.
</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Apr 8
16:33:49 PDT 1997<BR>
</B>Created a AgentClass, dervied from TclClass. Removed NullAgentClass,
and moved Agent/Null into tcl/lib/ns-agent.tcl <BR>
Files affected: agent.cc, Makefile.in, tcl/lib/ns-lib.tcl, tcl/lib/ns-agent.tcl
(<B>new</B>). </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Apr 8
16:33:49 PDT 1997<BR>
</B>Added TCL debugger capabilities to <I>ns</I>.<BR>
To use, reconfigure <I>ns</I> with <A HREF="http://expect.nist.gov/tcl-debug/tcl-debug.tar.gz">tcl-debug
5.20</A>. In your script, add `debug 1' at the location you want to start
debugging.<BR>
More details about the Tcl debugger are in <A HREF="http://expect.nist.gov/doc/tcl-debug.ps.Z">Don
Libes' paper</A>.<BR>
Files affected: tclAppInit.cc, configure.in, tcl/lib/ns-lib.tcl, conf/configure.in.tcldebug
(<B>new</B>). </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Apr 8
16:33:49 PDT 1997<BR>
</B>Moved class <TT>Delay/Link</TT> to class <TT>DelayLink</TT>.<BR>
Files affected: delay.cc, tcl/ex/fq-cbr.tcl, tcl/ex/fq.tcl, tcl/lib/ns-default.tcl,
tcl/lib/ns-link.tcl. </LI>

<LI><B><A HREF="http://www.parc.xerox.com/csl/members/bajaj">[SB]</A></B>
<B>Mon Mar 31 17:46:04 PST 1997<BR>
</B>Added deficit round robin scheduling (drr.cc) </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Fri
Mar 28 20:45:40 PST 1997<BR>
</B>Update </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]'s</A></B> scoreboard
changes with respect to this afternoon's packet format changes. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Fri
Mar 28 20:32:24 PST 1997<BR>
</B>First cut at integration of nam into ns code base. Basically just ported
the pieces verbatim so that nam can now be run as a script interpreted
by nsx. In this crude initial version, you can run &quot;../nsx srm-demo-nam.tcl
-name nam&quot; from the nam directory. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A></B> <B>Fri Mar
28 18:45:00 PST 1997<BR>
</B>Brought scoreboard.cc and scoreboard.h up to date with the latest versions
that were in ns-1 (9/96 PSC version: UpdateScoreBoard, CheckSndNxt, MarkRetran
modified for fack). Now most of test-suite-sack test cases work correctly.
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Fri
Mar 28 17:33:43 PST 1997<BR>
</B>A number of additional changes to the packet format. Eliminated the
&quot;Header&quot; classes altogether. Now we have a simple template header-class
template that just defines the header size. Most of the packet-manager
functionality moved into ns-packet.tcl. Factored the flags field out of
ip6 into a separate hdr_flags struct. Eliminated old commented-out code
in a number of places. Created a &quot;common&quot; header (hdr_cmn) and
moved the size field from the ip header to the new common header. Also
put the uid here. Changed hdr_ipv6 to hdr_ip for consistency. </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> <B>Fri Mar
28 13:36:58 PST 1997<BR>
</B>Updates to make RED gateways work. Includes mods to red.cc and RED's
default parameter names, some additions to the compat library, and a change
so that when the simulator begins all queues have a &quot;reset&quot; method
called (previously, only nodes and agents had this done to them, but RED
and probably some other queue types need to be reset to compute functions
of their Otcl-linked variables before the sim starts). </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~tomh">[TH]</A></B> <B>Fri Mar
28 12:50:02 PST 1997<BR>
</B>Added test-suite-v2.tcl to the repository (port of &quot;test-suite.tcl&quot;).
Added two new instprocs to ns-lib.tcl which help to set up tcp connections.
Moved the &quot;Agent instproc dst-port&quot; from ns-compat.tcl to ns-lib.tcl
since it can also be used in ns-2. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Fri
Mar 28 12:23:58 PST 1997<BR>
</B>Another cut at packet format reorg. Eliminated the need for static
variables. Moved the accessor methods from the &quot;Header&quot; classes
into the &quot;hdr&quot; structs. This rearrangement allowed us to alter
a minimal amount of code in each module that ref'd a packet header (i.e.,
only needed to change the pointer type of the variable that pointed at
the packet header.) </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a16.tar.gz">ns-2.0a16</A>
Fri Mar 28 00:56:48 PST 1997</H3>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Thu
Mar 27 23:49:57 PST 1997<BR>
</B>Added some new modules in tcl/ex for CS268 homework 3. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Thu
Mar 27 23:49:57 PST 1997<BR>
</B>Put back seqno's in cbr agents. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Thu
Mar 27 17:19:42 PST 1997<BR>
</B>Added a simple fair queuing module that uses flow id's (aka classes)
to differentiate flows. Added an example script: tcl/ex/fq.tcl. Some of
the code in fq.tcl should migrate into the built-in library. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Thu
Mar 27 00:11:31 PST 1997<BR>
</B>Added a make rule for &quot;nsx&quot;, which is just like ns but is
a wish interpreter instead of a tclsh. Retired ns_tclsh.cc and replaced
with tclAppInit.cc and tkAppInit.cc. Also added -ldl for bsdi-3. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> <B>Wed Mar
26 22:49:30 PST 1997<BR>
</B>Fixed up Session/RTP to work with latest version. Added a <I>rate_change()</I>
method to RTPAgent to allow correct behavior when changing transmission
rates. See code in <t>rtp.cc</t> for details. </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> <B>Wed Mar
26 17:11:17 PST 1997<BR>
</B>Replace test-suite.tcl with test-suite.tcl from ns-1. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Wed Mar 26
15:24:24 PST 1997<BR>
</B>The test suites break with the dynamics, because they want to acquire
an instance of the Simulator. However, the test-suites operate in compatibility
mode, and hence only create an instance of OldSim, a subclass of Simulator.
So, wrote a `Simulator instance' procedure that returns the current instance
of the simulator.<BR>
Files affected: tcl/lib/ns-lib.tcl, tcl/lib/ns-trace.tcl, tcl/rtglib/dynamics.tcl,
tcl/rtglib/route-proto.tcl </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a15.tar.gz">ns-2.0a15</A>
<B>Tue Mar 25 14:56:39 PST 1997</B></H3>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
trace.h to FILES. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a14.tar.gz">ns-2.0a14</A>
<B>Tue Mar 25 14:00:35 PST 1997</B></H3>

<P><I>Snapshot for alpha testers.</I> </P>

<UL>
<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Mar 25
09:16:33 PST 1997<BR>
</B>Fix auto configuration so that libotcl.a is found when the directory
is explicitly specified using --with-otcl.<BR>
Files affected: conf/configure.in.otcl, configure</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Mar 25
09:16:33 PST 1997<BR>
</B>Change Tracing so that trace elements can be created and used entirely
via OTcl if the tracing is unrelated to packet activity.<BR>
See rtModel::init, rtModel::trace, and rtModel::log-dynamic in tcl/rtglib/dynamics.tcl
for how to use.<BR>
Files affected: Makefile.in, trace.cc, tcl/lib/ns-lib.tcl, tcl/lib/ns-trace.tcl
(<B>new</B>)</LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Mar 25
09:16:33 PST 1997<BR>
</B>Add dynamics to links and nodes so that portions of the topology can
be made to fail and recover. The failure and recovery can be controlled
through distributions.<BR>
Usage:</LI>

<PRE>        set ns [new Simulator]
        $ns rtmodel &lt;Distribution&gt; {&lt;up-time&gt; &lt;down-time&gt;} &lt;node1&gt; [&lt;node2&gt;]</PRE>

<P>A distribution (Distribution) can be specified either to a single node
(node1) or to a single link (between node1 and node2). The up-time (down-time)
is a parameter for the distribution to specify how long the specified node/link
will be up (down) before changing state to being down (up).<BR>
Files affected: Makefile.in, connector.cc, delay.cc, dynalink.cc (<B>new</B>),
queue.cc, queue.h, tcl/lib/ns-lib.tcl, tcl/lib/ns-node.tcl, tcl/rtglib/dynamics.tcl
(<B>new</B>), tcl/ex/simple-dyn.tcl (<B>new</B>), tcl/ex/dynamic-nam.tcl(<B>new</B>),
tcl/nam-demo/nstonam.awk.</P>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> <B>Tue Mar 25
09:16:33 PST 1997<BR>
</B>Add dynamic routing to deal with topology changes (<I>work in progress</I>).
Currently, the basic all-pairs-spf routing has been modified to fit a more
uniform API. Also complete is a session-level routing, (<I>i.e.</I>, the
all-pairs-spf static routing used to precompute routes prior to starting
the simulation, and run everytime the topology changes).<BR>
Usage:</LI>

<PRE>        set ns [new Simulator]
        $ns run [Static|Session]</PRE>

<P>Note: Additional more detailed configuration hooks will soon become
available, as well as other routing protocols.<BR>
Files affected: Makefile.in, tcl/lib/ns-lib.tcl, tcl/rtglib/route-proto.tcl
(<B>new</B>), tcl/ex/simple-rtg.tcl (<B>new</B>).</P>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
heap.h to FILES. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a13.tar.gz">ns-2.0a13</A>
<B>Fri Mar 21 09:08:05 PST 1997</B></H3>

<P><I>Snapshot for alpha testers.</I> </P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Tue
Mar 18 15:32:01 PST 1997<BR>
</B>Integrated <A HREF="http://tns-www.lcs.mit.edu/people/djw/bio.html">David
Wetherall's</A> calendar queue. Use as: </LI>

<PRE>        set ns [new Simulator]
        $ns use-scheduler Calendar
</PRE>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Tue
Mar 18 15:32:01 PST 1997<BR>
</B>Added a simple, completely contrived script to generate SRM-like sample
paths to illustrate SRM in EECS colloquium (see tcl/ex/srm-demo.tcl). </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> <B>Tue
Mar 18 15:32:01 PST 1997<BR>
</B>Fixed bug in Packet::copy. &quot;*p = *this&quot; was bogus because
bits are now allocated in a separate buffer and this was smashing the current
packet's bits buffer to point to the old one, which was both leaking memory
and causing unwanted sharing of private buffers. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> First
cut at agent detaching code. Suggested by <A HREF="http://www-video.eecs.berkeley.edu/~emile/">Emile
Sahouria</A>. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
bug pointed out by <A HREF="http://www-video.eecs.berkeley.edu/~emile/">Emile
Sahouria</A>, <A HREF="http://www.cs.berkeley.edu/~gnguyen">Giao Nguyen</A>,
and <A HREF="http://www.cs.berkeley.edu/~tomh">Tom Henderson</A>, where
node port demuxer was created in wrong place. Moved this code from compute-routes
to Node::attach (i.e., should install locate route to port demuxer first
time the demuxer is created, not when compute-routes is run, becase in
latter case port demuxer might not yet exist). </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> Arrange for
dynamic linking to be the default instead of static. Static linking is
performed if '.devel' exists in the build directory. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fix up
tcl/ex/simple.tcl for v2. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Set flow-id
in tcp ack agent just as we used to set the class-id. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Arrange
for tcl variable &quot;class_&quot; to be bound to flow-id field so that
scripts impacted by Kevin's recent packet header changes continue to work.
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
a new TCPSimple that does minimal Go-back-N (no slow-start, no fast restransmit,
etc) for a CS268 homework. </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> Change to
ns-source.tcl to incorporate Source/FTP &quot;produce&quot; function, needed
by some of the ns-1 conformance tests. Added &quot;agent&quot; instproc
to node to return the agent with the specified port ID. Fixed up some typedef
and other type conflicts in packet.h and with respect to srandom() and
gettimeofday() on suns. </LI>

<LI><B><A HREF="http://www-nrg.ee.lbl.gov/kfall">[KF]</A></B> Support for
new packet format. Fix bug relating to header double-word alignment, happens
on suns. </LI>

<LI><B><A HREF="http://www.isi.edu/~kannan/">[KVa]</A></B> Add support
for heap schedulers. Use as: </LI>

<PRE>        set ns [new Simulator]
        $ns use-scheduler Heap</PRE>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a12.tar.gz">ns-2.0a12</A>
<B>Sat Feb 22 22:09:51 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Bug fix
from <A HREF="mailto:mjh@isi.edu">Mark Handley</A>. Reno tcp agent had
wrong prototype for recv method and thus was not overriding the default
virtual. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
<A HREF="http://www.brookfield.ans.net/ans/nanog/ns-hacks.html">several
changes</A> from <A HREF="mailto:curtis@ans.net">Curtis Villamizar</A>,
including a simple stochastic fair queuing module and a simple change to
the tcp agent to emulate persistent connections. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Regenerated
configure using <A HREF="http://www-nrg.ee.lbl.gov/kfall">Kevin Fall's</A>
latest fixes to our conf module. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Changed
drop-trace method to drop-target. This should only affect the internal
APIs and shouldn't break any scripts. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Bumped
size of max message in packet structure to 80 bytes. This limit eventually
must be removed. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Eliminated
C++ statically defined default drop-target and changed link building code
to point a queue's drop-target to a null-agent. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
first cut for queue-size monitoring agents (add integrator.cc). Cleaned
up approach for splicing objects into Link pipeline. Added ttl field to
packets and TTLChecker object to update ttl and throw out ttl-expired packets
(and ttl.cc). </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
long-standing bug in static routing code; problem found by, and fix supplied
by, <A HREF="http://www.cs.berkeley.edu/~aswan/">Andrew Swan</A>. Went
undetected for so long because bug occurs only for simplex links. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a11.tar.gz">ns-2.0a11</A>
<B>Thu Feb 13 11:28:35 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
bug in ftp source compat code introduced by last rev. Prevented test suite
from running. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a10.tar.gz">ns-2.0a10</A>
<B>Mon Feb 3 13:14:48 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Made
a number of small changes to help out with <A HREF="http://www-mash.cs.berkeley.edu/cs268/hw1.html">homework
1</A> for <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268</A>. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
missing-return bug introduced in last rev. Thanks to <A HREF="http://www.isi.edu/~wlee/">WeeSan
Lee</A>. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Changed
<I>Agent/Message</I> callback name from <I>handle</I> to <I>recv</I>. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a9.tar.gz">ns-2.0a9</A>
<B>Thu Jan 30 21:11:34 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
inconsistent declaration of random() and problem with binding of &quot;maxSackBlocks_&quot;.
Reported by <A HREF="http://www.isi.edu/~wlee/">WeeSan Lee</A>. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Restructured
the way agents are reset. Moved from node &quot;attach time&quot; to simulation
&quot;run time&quot;. Otherwise, state variables that change between attach
and run-time aren't consistent with the reset operation. This fix prompted
by <A HREF="http://www.cs.berkeley.edu/~tomh">Tom Henderson</A>, who noticed
that delayed-ACK TCP output was inconsistent with that of ns-1. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a8.tar.gz">ns-2.0a8</A>
<B>Mon Jan 27 19:26:17 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Omitted
connector.cc and connector.h from distribution; now added. Reported by
<A HREF="http://www.isi.edu/~wlee/">WeeSan Lee</A>. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a7.tar.gz">ns-2.0a7</A>
<B>Mon Jan 27 18:09:02 PST 1997</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators
and <A HREF="http://www-mash.cs.berkeley.edu/cs268/">CS268 students.</A></I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Added
<A HREF="mailto:dante@valhalla.internet-cafe.com">Dante De Lucia's</A>
generic, reusable logging module. (See log.cc.) But have not compiled it
in yet because of xmalloc references. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fixed
bugs in compat code that prevented SACK code from being properly configured.
Reported by <A HREF="http://www.cs.berkeley.edu/~tomh">Tom Henderson</A>.
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Changed
instance variable naming conventions to append underscore to all names,
e.g., Agent::dst is now Agent::dst_. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Changed
class naming conventions to use consistent mixed case, e.g., Agent/TCP
instead of agent/tcp. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Eliminated
Node class since splitting NsObject and Node into no longer makes any sense.
Also, &quot;Node&quot; was a bad name because it implies something about
topology and at this level it is toplogically independent. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a6.tar.gz">ns-2.0a6</A>
<B>Tue Dec 31 18:55:39 PST 1996</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators.</I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> Fixed up
RTCP Timer bug. Added srctab and srcids to RTP Sessions. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> Added very
first rough draft of NamSimulator that produces a nam_config for automatic
layout. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~elan">[EA]</A></B> Added RTP
Session class along with RTP and RTCP agents. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a4.tar.gz">ns-2.0a4</A>
<B>Sun Nov 10 11:06:46 PST 1996</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators.</I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Removed
re-parenting hooks from <I>ns-lib.tcl</I> since TclClass now automatically
makes all the classes in a class path name. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Ported
partially completed <I>ivs</I> module from ns-1. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Fix from
<A HREF="http://www-scf.usc.edu/~ahelmy/">Ahmed A-G Helmy</A> to omit unecessary
code in <I>MultiNode::init</I>. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Coalesce
multiple sources into a single graft message to avoid dropped grafts with
a large number of messages would otherwise blast into the first hop and
overflow the queue (grafts are not yet sent reliably). </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a3.tar.gz">ns-2.0a3</A>
<B>Sun Nov 10 11:06:46 PST 1996</B></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators.</I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Implemented
simple RPF style flood and prune multicast (see <I>tcl/lib/ns-mcast.tcl</I>).
Multicast routing object is build from a number of classifier objects (e.g.,
the primary classifier routes the packet either to a multicast or to a
unicast classifier based on the multicast bit in the in the destination
address). Multicast routes are computed statically from unicast routes.
Prune timers are not yet implemented and grafts are currently sent unreliably.
</LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Created
<I>Node</I> and <I>Link</I> classes to clean up <I>Simulator</I> class
and allow these objects to be more easily abstracted into composite object.
E.g., a multicast-node is composed of a number of sub-objects. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Use re-parenting
trick across a lot more classes in <I>ns-lib.tcl</I>. Created <I>source</I>
base class for <I>source/ftp</I>, <I>source/telnet</I>, etc. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Modified
tcp-sink module to avoid virtual multiple inheritance (this causes too
many problems with non-compliant C++ compilers). Created Acker and Sacker
classes that are instanced in the sink classes. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Type-cast
bug fixes from <A HREF="http://www-scf.usc.edu/~ahelmy/">Ahmed A-G Helmy</A>.
</LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a2.tar.gz">ns-2.0a2</A>
<I>Thu Nov 7 1996</I></H3>

<P><I>Snapshot to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators.</I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> First
cut at multicast router from fine-grained objects. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Add missing
files to FILES. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Implemented
<I>replicator</I> and <I>classifier/mcast</I> objects as first step toward
supporting multicast routers and broadcast LANs. </LI>

<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Clean
up class interface. Created <I>Simulator</I> OTcl class as uniform API
for manipulating simulator. Moved almost all of the ns-1 backward compatability
code into a new class called <I>OldSim</I>. </LI>
</UL>

<P>
<HR></P>

<H3><A HREF="http://www-mash.cs.berkeley.edu/dist/ns-src-2.0a1.tar.gz">ns-2.0a1</A>
<B>Wed Nov 6 13:57:31 PST 1996</B></H3>

<P><I>Pre-release to <A HREF="http://netweb.usc.edu/vint/">VINT</A> collaborators.</I>
</P>

<UL>
<LI><B><A HREF="http://www.cs.berkeley.edu/~mccanne">[SM]</A></B> Major
architectural changes. Object are now finer grained. We have developed
a more cleanly defined Tcl API so that developers can change the back-end
while more easily maintaining backward compatibility. The simulator is
now based entirely MIT's <A HREF="ftp://ftp.tns.lcs.mit.edu/pub/otcl/README.html">Object
Tcl</A>. The TclClass C++ base class replaces the old Matcher class. An
OTcl class is created in C++ by statically declaring a derived subclass
of TclClass. OTcl makes it easy to extend a class with new methods either
on the C++ side or the Tcl side. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0 Tue Jul 23 11:27:17 PDT 1996</H3>

<UL>
<LI>Added a hook to dump a stack trace and exit when a background error
is encounter (i.e., an error in a proc scheduled with ns-at). This makes
it MUCH easier to debug simulator scripts that have syntax erros and what
not in scheduled tcl stubs. </LI>

<LI>Removed sack-tcp.cc from distribution. This leaves tcp-sack1.cc as
the only SACK TCP implementation distributed with ns. </LI>

<LI>Put back hook to source &quot;~/.ns.tcl&quot; since people rely on
this. Fix provided by <A HREF="mailto:jtw@mercury.lcs.mit.edu">John Wroclawski</A>.
</LI>
</UL>

<P>
<HR></P>

<H3>v1.0b4 Mon May 6 22:22:31 PDT 1996</H3>

<UL>
<LI>Corrected fix to TCP's window decrease algorithm in v1.0b2. Now, after
a Reno Fast Retransmit, the window decreases to min(cwnd_, wnd_)/2, not
to cwnd_/2 (before v1.0b2) or to min(cwnd_ + dupwnd_, wnd_)/2 (as in v1.0b2,3).
</LI>

<LI>Corrected calculation of congestion window for NewReno TCP for the
case when multiple packets are dropped from a single window of data. </LI>

<LI>Fixed bug in tcp-sink.cc that allowed an infinite loop under some circumstances
when the number of outstanding packets in TCP was exactly MWS-1. Also added
a note to the man page about MWS and other constants in ns. Thanks to <A HREF="mailto:suter@big.att.com">Bernhard
Suter</A> for the bug report and fix. </LI>

<LI>In TCP, changed the constant TCP_TICK to the variable tcp_tick_, with
the default set in ns_default.tcl. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0b3 Mon Apr 29 19:10:33 PDT 1996</H3>

<UL>
<LI>Ported to Tcl v7.5. Changed trace objects to use new Tcl_Channel abstraction
(for O/S indepedence). <I>ns</I> will NOT compile with earlier versions
of Tcl. </LI>

<LI>Added the parameter &quot;maxcwnd&quot;, for the maximum congestion
window, and corrected the use of &quot;window&quot;, the receiver's advertised
window, in the reno and sack implementations of TCP. </LI>

<LI>Changed some of the *.tcl scripts to take into account the corrected
use of the receiver's advertised window, and to use &quot;maxcwnd&quot;.
</LI>
</UL>

<P>
<HR></P>

<H3>v1.0b2 Fri Mar 29 16:40:25 PST 1996</H3>

<UL>
<LI>Changed interpreter to not source &quot;.ns.tcl&quot; since tcl no
longer uses the tcl_RcFileName C variable. </LI>

<LI>Fixed a couple more SunPro C++ compiler problems. Patcjes from <A HREF="mailto:earce@ukraine.corp.mot.comf">Michael
Pearce</A>. </LI>

<LI>Corrected TCP's window decrease algorithm from &quot;cwnd_ /= 2;&quot;
to &quot;cwnd_ = window() / 2;&quot;. Thanks to <A HREF="mailto:tzieg@cosy.sbg.ac.at">Thomas
Ziegler</A> for the bug report. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0b1 Sun Mar 3 1996</H3>

<UL>
<LI>Fixed bug in tcp.cc that caused the retransmit timeout backoff behavior
never to reset. Thanks to <A HREF="mailto:mahdavi@psc.edu">Jamshid Mahdavi</A>
for reporting both the bug and the fix. </LI>

<LI>Fixed bug in tcplib telnet module. Random number generator was being
seeded on each call (from the system clock) rather than once at start-up.
Replaced calls to random number routines with calls to Random::uniform.
Thanks to <A HREF="mailto:vogels@CS.Cornell.EDU">Werner Vogels</A> for
reporting this bug. </LI>

<LI>Added local explicit-join notification for experimentation with RLM.
</LI>

<LI>Added a &quot;message&quot; agent that allows abibtrary message packets
to be sent and received using tcl. </LI>

<LI>Moved type-specific packet fields into a &quot;body&quot; union. Eliminated
&quot;reason&quot; field (rather than move it to tcp body) since we should
have just used the &quot;flags&quot; field to begin with. </LI>

<LI>Added tracing functionality to loss-monitor agents (e.g., so we can
compute sliding window loss statistics using an external tool). </LI>

<LI>Changed ns-now to use 17 digits of precision. Otherwise, truncation
could cause certain algorithms (e.g., RLM) to try to schedule events into
the past. </LI>

<LI>Added &quot;random&quot; attribute to cbr sources to cause them to
generate a Poisson rather than fixed-rate packet stream. </LI>

<LI>Fixed bug in RED initialization that could cause (almost-) infinite
loop at start up. </LI>

<LI>Incorporated patches from <A HREF="mailto:pearce@ukraine.corp.mot.com">Michael
Pearce</A> to compile with SunPro C++ v3.0.1. </LI>

<LI>Fixed bug that caused memory corruption when using class ID's larger
than 10. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a17 Thu Dec 27 1995</H3>

<UL>
<LI>Finished port of &quot;tcp-sack1&quot; and &quot;sack1-tcp-sink&quot;,
a second format for selective acks. </LI>

<LI>Added &quot;bursty&quot; source for tcp connections. </LI>

<LI>Added new loss policies for drop-tail links, &quot;lossy-uniform&quot;
and &quot;lossy-det&quot;. [Kevin Fall]. </LI>

<LI>Added more test files to the distribution: test-all-cbq, test-all-red,
test-all-sack, and test-sack, in addition to test-all. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a16 Tue Dec 12 19:05:56 PST 1995</H3>

<UL>
<LI>Added source code for sack-tcp.cc. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a15 Tue Dec 12 17:52:32 PST 1995</H3>

<UL>
<LI>First cut at adding code for &quot;tcp-sack1&quot; and &quot;sack1-tcp-sink&quot;,
from Matt Mathis (mathis@zippy.psc.edu) and Jamshid Mahdavi (mahdavi@psc.edu).
</LI>

<LI>Changed format of window and RTT reports sent from tcp.cc to the trace
file. </LI>

<LI>Added &quot;maxpkts&quot; for ftp and telnet sources. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a14 Fri Dec 1 10:35:30 PST 1995</H3>

<UL>
<LI>Finished port of TCP with selective acks, along with SACK acceptance
tests in &quot;test-sack&quot;. </LI>

<LI>Added a modified version of Reno TCP, tcp-newreno.cc, for research
purposes. </LI>

<LI>Have not yet added tcp-sack or tcp-newreno to the man page. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a13 Wed Nov 22 15:14:50 PST 1995</H3>

<UL>
<LI>Finished port of cbq code from tcpsim (with contributions from Michael
Speer), and added cbq simulator tests. </LI>

<LI>Added unique ID to each event in scheduler queue and added hook to
lookup an event by using this ID. </LI>

<LI>Added hook for deleting <I>at</I> callbacks. </LI>

<LI>Fixed bugs in multicast delivery where agent could modify routing desstructors
during the callback. </LI>

<LI>First cut at port of TCP with selective acks. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a12 Sun Nov 5 21:19</H3>

<UL>
<LI>Added config.h and loss-monitor.cc to FILES so they get included in
tar. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a11 Sun Nov 5 21:19</H3>

<UL>
<LI>Added loss-monitor agent, which is the same as a null-sink but calls
a tcl proc whenever there is a gap in the received sequence space. Will
expand functionality as necessary for MMG experiments. </LI>

<LI>Integrated more mature tcl/c++ architecture from vic/vat. This has
a major impact on the way ns objects are created and deleted, but we maintain
backward compatibility with previous versions. The &quot;ns&quot; command
is no longer implemented in C++, but rather as a library function (in ns_default.tcl)
that provides glue between the old commands and the new &quot;new/delete&quot;
interface. </LI>

<LI>First cut at port of cbq code from tcpsim. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a10 Fri Oct 27 17:44:39 PDT 1995</H3>

<UL>
<LI>Added &quot;flush&quot; method to trace objects so that output can
be flushed before exiting. </LI>

<LI>Added link-level src/dst fields to Packet class so node can tell which
&quot;interface&quot; a packet arrived on. </LI>

<LI>Added support for dense-mode PIM style flooding with prune/graft machinery.
</LI>
</UL>

<P>
<HR></P>

<H3>v1.0a10 Fri Oct 27 17:44:39 PDT 1995</H3>

<UL>
<LI>Fixed test-suite.tcl so that old awk works. Problem reported by <A HREF="mailto:kannan@catarina.usc.edu">Kannan
Varadhan</A>. </LI>

<LI>Fixed Makefile.in to use V_LIB_TCL, as intended. Fix supplied by <A HREF="mailto:kannan@catarina.usc.edu">Kannan
Varadhan</A>. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a9 Wed Oct 11 16:58:00 PDT 1995</H3>

<UL>
<LI>Fixed solaris compilation problems. </LI>

<LI>Changed configure to use &quot;-mv8 -msupersparc&quot; only for gcc.
</LI>
</UL>

<P>
<HR></P>

<H3>v1.0a8 Fri Sep 29 15:11:04 PDT 1995</H3>

<UL>
<LI>Fixed more for-stmt scope bugs. </LI>

<LI>Fixed compilation problems with Sun and DEC compilers. Problem reported
by <A HREF="mailto:turletti@cayenne.lcs.mit.edu">Thierry Turletti</A>.
</LI>
</UL>

<P>
<HR></P>

<H3>v1.0a7 Wed Sep 27 19:55:23 PDT 1995</H3>

<UL>
<LI>First public (alpha) release. </LI>

<LI>Included man page to FILES so it goes in tar. </LI>

<LI>Updated README. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a6 Sep 21 09:24 PDT 1995</H3>

<UL>
<LI>Added &quot;bug-fix&quot; hook to tcp reno. </LI>

<LI>Ported to tcl-7.4. </LI>

<LI>Include <A HREF="mailto:mathis@psc.edu">Matt Mathis'</A> test-all script.
</LI>

<LI>Changed &quot;for&quot; statement conventions to adhere to the proposed
<A HREF="http://www.cygnus.com/~mrs/wp-draft/stmt.html#stmt.for">ANSI standard
change</A> which re-defines the lexical scope semantics of the initializer
statement. In order to be compatible with both the old and new semantics,
we have changed all instances of </LI>

<UL>
<LI>for (int i = ... ) ... </LI>

<LI>use(i); </LI>
</UL>

<P>to </P>

<UL>
<LI>int i; </LI>

<LI>for (i = ... ) ... </LI>

<LI>use(i); </LI>
</UL>
</UL>

<P>
<HR></P>

<H3>v1.0a4</H3>

<UL>
<LI>Fixed bug in xgraph output: new version of xgraph doesn't understand
FileorDev because it now uses the PRINTER environment variable. Bug fix
from Matt Mathis (mathis@psc.edu). </LI>

<LI>Added a 'test-all' sh script to distribution, which runs whole suite
of regression tests and compares them against a reference output. Thanks
to Matt Mathis (mathis@psc.edu). </LI>

<LI>Don't include tk.h from Tcl.cc. </LI>
</UL>

<P>
<HR></P>

<H3>v1.0a1 Mon Jul 31 16:05:08 PDT 1995</H3>

<UL>
<LI>Changed all references to random() to use Random class so we can easily
change our pseudo-random number generator. </LI>

<LI>Added convention to object names so we can derive their type from their
name. </LI>

<LI>Changed nodes to be first class objects like rest of objects. </LI>

<LI>Changed trace syntax to use tcl files rather than it's own open/close.
For example, </LI>

<UL>
<LI>set f1 [open out.hop w] </LI>

<LI>$trace attach $f1 </LI>
</UL>

<LI>Changed '-' and 'd' trace records to have same format as '+' and 'h'
trace records. </LI>

<LI>Incoporate vic's &quot;matcher&quot; abstraction into agent and link
models. </LI>

<LI>Major hacking to port tcpsim to tcl framework. </LI>
</UL>

</BODY>
</HTML>
